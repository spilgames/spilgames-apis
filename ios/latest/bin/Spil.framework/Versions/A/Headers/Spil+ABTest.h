//
//  Spil+ABTest.h
//  Spil
//
//  Created by Ignacio Calderon on 11/6/13.
//  Copyright (c) 2013 Spil Games. All rights reserved.
//

#import <Spil/Spil.h>

@interface Spil (ABTest)

/**
 * Sets the ABTestDelegate and receive the proper notifications from it. Without the delegate
 * this subsystem is disabled.
 * @param	delegate The delegate to handle the events generated by the A/B test subsystem.
 */
-(void) setABTestDelegate:(id<ABTestDelegate>)delegate;

/**
 * Updates the user basic information to create segments and improve A/B tests. This
 * method will send:
 * - Country
 * - Language
 * - Device (ipad, ipod, iphone)
 * - OS Platform (version)
 */
-(void) abtestUpdateUserInfo;

/**
 * Updates the user information to create segments and improve A/B tests. This
 * method will send the basic information plus all the information included in the extra info
 * @param	extraInfo	A dictionary with all the extra parameter we want to submit.
 * @see abtestUpdateUserInfo
 */
-(void) abtestUpdateUserInfoWith:(NSDictionary*)extraInfo;

/**
 * Sends a request to retrieve the test differences for this user (MAC Address). The
 * differences will be sent asynchronously to the ABTestDelegate implemented and set
 * in the getABTest method.
 */
-(void) abtestGetTestDiff;

/**
 * For development purposes only. Send a request to retrieve the test differences for
 * this user. The differences will be sent asynchronously to the ABTestDelegate implemented
 * and set in the getABTest method.
 * @param	user	The user to force the different variants of the A/B test.
 */
-(void) abtestGetTestDiffForUser:(NSString*)user;

/**
 * Marks a particular resource as a success with the parameters that lead to that success.
 * This method should be called with the exact name of the resource and also it must
 * be called with the control version to be able to compare results.
 * @param	name	The name of the resource to mark as a successful one.
 * @param	params	A dictionary with extra parameters relevant for the analysis of the action called.
 */
-(void) abtestMarkSucceedTest:(NSString*)name withParameters:(NSDictionary*)params;

@end
